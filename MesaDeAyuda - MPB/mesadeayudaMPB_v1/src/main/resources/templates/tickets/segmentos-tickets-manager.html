<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:th="http://www.thymeleaf.org">
    <head th:replace="~{layout/plantilla :: head}">
        <title>Mesa de Ayuda</title>
        <meta charset="UTF-8"/>
    </head>

    <body>
        <section th:fragment="properties-section">
            <div class="modal-viewer" id="imageViewer">
                <button class="close-viewer" onclick="closeViewer()">&times;</button>
                <button class="image-nav prev-image" onclick="changeImage(-1)">&#10094;</button>
                <div class="modal-content-viewer">
                    <img src="" alt="Vista previa" class="modal-image-viewer" id="currentImage">
                        <div class="image-counter" id="imageCounter"></div>
                        <div class="thumbnail-container" id="thumbnailContainer"></div>
                </div>
                <button class="image-nav next-image" onclick="changeImage(1)">&#10095;</button>
            </div>


            <div class="back-button-container">
                <a href="javascript:void(0);" onclick="window.history.back();" class="btn btn-outline-secondary back-button">
                    <i class="fa-solid fa-arrow-left"></i>
                </a>


                <button th:if="${ticket.asignadoPara == null}" 
                        type="button" 
                        id="btnAtenderTicket" 
                        class="btn btn-outline-primary" 
                        th:data-ticket-id="${ticket.idTicket}"
                        onclick="atenderTicket(this.getAttribute('data-ticket-id'))">
                    <i class="fa-solid fa-clipboard-check"></i> Atender Ticket
                </button>

                <!-- Botones que se muestran solo si el ticket está asignado -->
                <button type="button" 
                        class="btn btn-outline-primary" 
                        data-bs-toggle="modal" 
                        data-bs-target="#elevateTicketModal">
                    <i class="fa-solid fa-pen"></i> Actualizar Ticket
                </button>
                <button th:if="${ticket.asignadoPara == null}" 
                        type="button" 
                        class="btn btn-outline-primary"
                        data-bs-toggle="modal" 
                        data-bs-target="#elevateTicketModal"
                        onclick="openAssignTicketsModal()">
                    <i class="fa-solid fa-user-plus"></i> Asignar Ticket
                </button>
                <button th:if="${ticket.asignadoPara != null}" 
                        type="button" 
                        class="btn btn-outline-primary" 
                        data-bs-toggle="modal" 
                        data-bs-target="#elevateTicketModal">
                    <i class="fa-solid fa-user-pen"></i> Reasignar Ticket
                </button>
                <button th:if="${ticket.asignadoPara != null && ticket.estado != 'Resuelto'}" 
        type="button" 
        class="btn btn-outline-success" 
        id="btnCerrarTicket"
        th:data-ticket-id="${ticket.idTicket}"
        onclick="closeTicket(this.getAttribute('data-ticket-id'))">
    <i class="fa-regular fa-circle-check"></i> Cerrar Ticket
</button>
                <button type="button" 
                        class="btn btn-danger" 
                        id="desactivarBtn" 
                        th:data-ticket-id="${ticket.idTicket}"
                        onclick="desactivarTicket(this.getAttribute('data-ticket-id'))">
                    <i class="fa-solid fa-ban"></i> Desactivar Ticket
                </button>
            </div>

            <div class="container">
                <!-- Sidebar -->
                <div class="ticket-summary card">
                    <h2 class="ticket-title">Resumen del Ticket</h2>
                    <div class="info-row">
                        <span class="info-label">Estado</span>
                        <span th:class="'badge badge-' + ${#strings.toLowerCase(ticket.estado)}"
                              th:text="${ticket.estado}">(Estado)</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Prioridad</span>
                        <span th:class="'badge badge-' + ${ticket.prioridad == 'Sin Asignar' ? 'sin-asignar' : #strings.toLowerCase(ticket.prioridad)}"
                              th:text="${ticket.prioridad == 'Sin Asignar' ? 'Sin Asignar' : ticket.prioridad}">
                            (Prioridad)
                        </span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Nivel de Soporte</span>
                        <span class="info-value">Nivel 1</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Tiempo de Respuesta SLA</span>
                        <span class="info-value">4 horas</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Tiempo Transcurrido</span>
                        <span class="info-value" id="tiempoTranscurrido">0 horas 0 minutos</span>
                    </div>
                    <button class="action-button">
                        <i class="fa-solid fa-arrow-turn-up"></i>
                        Elevar Ticket
                    </button>
                    <button class="action-button">
                        <i class="fa-solid fa-people-arrows"></i> Heredar Ticket
                    </button>
                    <button th:if="${ticket.asignadoPara != null}" 
                            type="button" 
                            class="action-button" 
                            onclick="openPrioridadModal()">
                        <i class="fa-solid fa-thumbtack"></i> Asignar Prioridad
                    </button>
                    <button class="action-button">
                        <i class="far fa-clock"></i>
                        Programar Seguimiento
                    </button>
                </div>

                <!-- Main Content -->
                <div class="ticket-details">
                    <div class="tabs">
                        <button class="tab-button active" data-tab="tab1">
                            <i class="fa-solid fa-list-ul"></i>
                            Detalles del Ticket
                        </button>
                        <button class="tab-button" data-tab="tab2">
                            <i class="fa-solid fa-comments"></i>
                            Respuestas
                            <span class="counter">3</span>
                        </button>
                        <button class="tab-button" data-tab="tab3">
                            <i class="fa-solid fa-clock-rotate-left"></i>
                            Auditoria
                        </button>
                    </div>
                    <div class="tab-content">
                        <div id="tab1" class="tab-pane active">
                            <div class="card" id="card-tabs">
                                <form>
                                    <div class="grid grid-2">
                                        <div class="form-group">
                                            <label for="solicitante" class="form-label">Solicitante</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="solicitante" 
                                                       th:value="${ticket.solicitante != null ? ticket.solicitante.nombre + ' ' + ticket.solicitante.apellido : 'Sin Asignar'}" 
                                                       readonly>
                                                    <button type="button" 
                                                            id="infoUsuario" 
                                                            class="btn btn-outline-secondary popover-btn" 
                                                            data-popover="Ver Perfil del Solicitante"
                                                            th:onclick="'window.location.href=\'/tickets/perfil-solicitante/' + ${ticket.solicitante.idUsuario} + '\''">
                                                        <i class="fa-solid fa-id-badge"></i>
                                                    </button>
                                            </div>
                                        </div>

                                        <script>

                                        </script>

                                        <div class="grid grid-2">
                                            <div class="form-group">
                                                <label for="codigo" class="form-label">Código</label>
                                                <input type="text" class="form-control" id="codigo" th:value="${ticket.codigo}" readonly>
                                            </div>
                                            <div class="form-group">
                                                <label for="impacto" class="form-label">Impacto</label>
                                                <input type="text" class="form-control" id="impacto" th:value="${#strings.isEmpty(ticket.impacto) ? 'Sin Asignar' : ticket.impacto}" readonly>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="grid grid-2">
                                        <div class="grid grid-2">
                                            <div class="form-group">
                                                <label for="fechaApertura" class="form-label">Fecha de Apertura</label>
                                                <input type="text" class="form-control" id="fechaApertura" 
                                                       th:value="${#dates.format(ticket.fechaApertura, 'dd')} + ' de ' + ${#dates.format(ticket.fechaApertura, 'MMMM')} + ' del ' + ${#dates.format(ticket.fechaApertura, 'yyyy')} + ' - ' + ${#dates.format(ticket.fechaApertura, 'HH:mm:ss')}" 
                                                       readonly>
                                            </div>
                                            <div class="form-group">
                                                <label for="categoria" class="form-label">Categoría</label>
                                                <input type="text" class="form-control" id="categoria" th:value="${ticket.categoria}" readonly>
                                            </div>
                                        </div>
                                        <div class="grid grid-2">
                                            <div class="form-group">
                                                <label for="prioridad" class="form-label">Prioridad</label>
                                                <input type="text" class="form-control" id="prioridad" th:value="${ticket.prioridad}" readonly>
                                            </div>
                                            <div class="form-group">
                                                <label for="estado" class="form-label">Estado</label>
                                                <select class="form-control no-interaction" id="estado">
                                                    <option th:selected="${ticket.estado == 'Abierto'}">Abierto</option>
                                                    <option th:selected="${ticket.estado == 'Pendiente'}">Pendiente</option>
                                                    <option th:selected="${ticket.estado == 'Cerrado'}">Cerrado</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="grid grid-2">
                                        <div class="form-group">
                                            <label for="asignadoPara" class="form-label">Asignado para</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="asignadoPara" 
                                                       th:value="${ticket.asignadoPara != null ? ticket.asignadoPara.nombre + ' ' + ticket.asignadoPara.apellido : 'Sin Asignar'}" 
                                                       readonly>
                                                    <button type="button" id="asignarTicket" class="btn btn-outline-secondary popover-btn" data-popover="Asignar Ticket">
                                                        <i class="fa-solid fa-user-plus"></i>
                                                    </button>
                                            </div>
                                        </div>
                                        <div class="grid grid-2">
                                            <div class="form-group">
                                                <label for="ultimaActualizacion" class="form-label">Última Fecha de Actualización</label>
                                                <input type="text" class="form-control" id="ultimaActualizacion" 
                                                       th:value="${#dates.format(ticket.fechaActualizacion, 'dd')} + ' de ' + ${#dates.format(ticket.fechaActualizacion, 'MMMM')} + ' del ' + ${#dates.format(ticket.fechaActualizacion, 'yyyy')} + ' - ' + ${#dates.format(ticket.fechaActualizacion, 'HH:mm:ss')}" 
                                                       readonly>
                                            </div>
                                            <div class="form-group">
                                                <label for="actualizadoPor" class="form-label">Actualizado por</label>
                                                <input type="text" class="form-control" id="actualizadoPor" 
                                                       th:value="${ticket.asignadoPara != null ? ticket.asignadoPara.nombre + ' ' + ticket.asignadoPara.apellido : 'Sin Asignar'}" 
                                                       readonly>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="breveDescripcion" class="form-label">Breve Descripción</label>
                                        <input type="text" class="form-control" id="breveDescripcion" th:value="${ticket.titulo}" readonly>
                                    </div>

                                    <div class="form-group">
                                        <label for="descripcion" class="form-label">Descripción</label>
                                        <textarea class="form-control" id="descripcion" readonly th:text="${ticket.descripcion}"></textarea>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">Archivos adjuntos</label>
                                        <div class="btn-group" th:if="${tieneImagenes}">
                                            <button type="button" class="btn btn-outline" 
                                                    th:onclick="'showImageViewer(' + ${ticket.idTicket} + ')'">
                                                <i class="fas fa-paperclip"></i> Ver Imágenes ([[${imagenesInfo.size()}]])
                                            </button>
                                        </div>
                                    </div>

                                </form>
                            </div>
                        </div>

                        <div id="tab2" class="tab-pane">
                            <!-- Contenido de la pestaña Respuestas -->
                            <div class="card" id="card-tabs" style="margin-bottom: 30px;">
                                <div class="chat-header">
                                    <h2>Chat de Soporte</h2>
                                </div>
                                <div class="chat-messages">
                                    <!-- Iterar sobre los mensajes del ticket -->
                                    <div th:each="mensaje : ${mensajes}" th:class="${mensaje.esNotaInterna} ? 'message internal-note' : 'message'">
                                        <div class="message-header">
                                            <span class="user-name" th:text="${mensaje.emisor.nombre + ' ' + mensaje.emisor.apellido}"></span>
                                            <!-- Mostrar la fecha en formato dd/MM/yyyy -->
                                            <span class="message-time" th:text="${#dates.format(mensaje.fechaHora, 'dd/MM/yyyy, hh:mm:ss a')}"></span>
                                        </div>
                                        <div class="message-content" th:text="${mensaje.mensaje}"></div>
                                    </div>
                                </div>                            </div>
                        </div>

                        <div id="tab3" class="tab-pane">
                            <div class="card" id="card-tabs">
                                <div class="audit-container">
                                    <div class="audit-header">
                                        <h2>Historial de Auditoría</h2>
                                        <div class="audit-filters">
                                            <select class="form-control">
                                                <option>Todas las acciones</option>
                                                <option>Cambios de estado</option>
                                                <option>Asignaciones</option>
                                                <option>Actualizaciones</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="audit-timeline">
                                        <div class="audit-item">
                                            <div class="audit-item-badge">
                                                <i class="fas fa-plus-circle"></i>
                                            </div>
                                            <div class="audit-item-content">
                                                <div class="audit-item-header">
                                                    <span class="audit-item-title">Ticket creado</span>
                                                    <span class="audit-item-time">2/17/2025, 10:49:49 AM</span>
                                                </div>
                                                <div class="audit-item-user">Unknown</div>
                                            </div>
                                        </div>

                                        <div class="audit-item">
                                            <div class="audit-item-badge">
                                                <i class="fas fa-user-plus"></i>
                                            </div>
                                            <div class="audit-item-content">
                                                <div class="audit-item-header">
                                                    <span class="audit-item-title">Asignado a Unknown</span>
                                                    <span class="audit-item-time">2/17/2025, 10:49:49 AM</span>
                                                </div>
                                                <div class="audit-item-user">Unknown</div>
                                            </div>
                                        </div>

                                        <div class="audit-item">
                                            <div class="audit-item-badge">
                                                <i class="fas fa-comment"></i>
                                            </div>
                                            <div class="audit-item-content">
                                                <div class="audit-item-header">
                                                    <span class="audit-item-title">Respuesta pública añadida</span>
                                                    <span class="audit-item-time">2/17/2025, 10:50:33 AM</span>
                                                </div>
                                                <div class="audit-item-user">Soporte Técnico</div>
                                            </div>
                                        </div>

                                        <div class="audit-item">
                                            <div class="audit-item-badge">
                                                <i class="fas fa-sticky-note"></i>
                                            </div>
                                            <div class="audit-item-content">
                                                <div class="audit-item-header">
                                                    <span class="audit-item-title">Nota interna añadida</span>
                                                    <span class="audit-item-time">2/17/2025, 10:50:50 AM</span>
                                                </div>
                                                <div class="audit-item-user">Soporte Técnico</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card" id="card-message-manager">
                            <div class="response-header">
                                <h2>Responder Ticket</h2>
                                <button type="button" class="response-type" id="responseType" onclick="toggleResponseType()">Respuesta Pública</button>
                            </div>
                            <form id="formResponderTicket" th:action="@{/tickets/responder/{id}(id=${ticket.idTicket})}" method="POST" onsubmit="responderTicket(event)">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                                <input type="hidden" id="esNotaInterna" name="esNotaInterna" value="false">
                                    <textarea class="response-textarea" id="respuesta" name="respuesta" 
                                              placeholder="Escribe tu respuesta pública..." 
                                              th:disabled="${ticket.prioridad == 'Sin Asignar'}"></textarea>
                                    <div class="response-actions">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-paper-plane"></i> Enviar Respuesta
                                        </button>
                                    </div>
                            </form>
                        </div>

                        <script>
                            function toggleResponseType() {
                                const button = document.getElementById('responseType');
                                const hiddenInput = document.getElementById('esNotaInterna');
                                if (button.textContent === 'Respuesta Pública') {
                                    button.textContent = 'Nota Interna';
                                    hiddenInput.value = 'true';
                                } else {
                                    button.textContent = 'Respuesta Pública';
                                    hiddenInput.value = 'false';
                                }
                            }
                        </script>
                    </div>
                </div>
            </div>

            <!-- Modal de Asignar Prioridad -->
            <div class="modal-overlay" id="prioridadModalOverlay">
                <div class="modal">
                    <div class="modal-header">
                        <h2 class="modal-title">Asigne la prioridad estimada según el valor de cada celda</h2>
                        <p class="modal-description">Una vez se actualice la prioridad del ticket, el usuario será notificado de inmediato y la sección para responder el ticket será habilitada para iniciar su respectiva resolución.</p>
                    </div>

                    <div class="modal-body">
                        <!-- Usa Thymeleaf para pasar el ID del ticket -->
                        <form th:action="@{/tickets/asignar-prioridad/{id}(id=${ticket.idTicket})}" method="POST">
                            <input type="hidden" name="_csrf" th:value="${_csrf.token}" /> <!-- Token CSRF -->
                            <div class="form-grid">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" for="categoria">Categoría</label>
                                        <div class="form-control">Hardware</div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="impacto">Impacto</label>
                                        <div class="form-control">Medio</div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" for="prioridad">Prioridad</label>
                                        <select class="form-select" id="prioridadSelect" name="prioridad" onchange="habilitarBoton()">
                                            <!-- Mostrar "Sin Asignar" solo si la prioridad actual es "Sin Asignar" -->
                                            <option th:if="${ticket.prioridad == 'Sin Asignar'}" value="Sin Asignar" th:selected="${ticket.prioridad == 'Sin Asignar'}">Sin Asignar</option>
                                            <option value="Bajo" th:selected="${ticket.prioridad == 'Bajo'}">Bajo</option>
                                            <option value="Medio" th:selected="${ticket.prioridad == 'Medio'}">Medio</option>
                                            <option value="Alto" th:selected="${ticket.prioridad == 'Alto'}">Alto</option>
                                            <option value="Critico" th:selected="${ticket.prioridad == 'Critico'}">Critico</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn" id="btnActualizarPrioridad" disabled>Actualizar Prioridad</button>
                        <button type="button" class="btn btn-outline" id="closePrioridadModalBtn">Cerrar</button>
                    </div>
                    </form>
                </div>
            </div>



            <!-- Modal para confirmar el cierre del ticket -->
            <div class="modal-overlay" id="confirmCloseModalOverlay">
                <div class="modal">
                    <div class="modal-header">
                        <h2 class="modal-title">Confirmar Cierre del Ticket</h2>
                    </div>
                    <div class="modal-body">
                        <p>¿Está seguro que desea cerrar el ticket?</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline" onclick="closeConfirmCloseModal()">Cancelar</button>
                        <button type="button" class="btn btn-primary" onclick="confirmCloseTicket()">Aceptar</button>
                    </div>
                </div>
            </div>

            <!-- Modal para mostrar error si no hay prioridad asignada -->
            <div class="modal-overlay" id="errorPriorityModalOverlay">
                <div class="modal">
                    <div class="modal-header">
                        <h2 class="modal-title">Error</h2>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <p>Para cerrar un ticket primero se le debe asignar un nivel de prioridad.</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" onclick="closeErrorPriorityModal()">Aceptar</button>
                    </div>
                </div>
            </div>

            <!-- Modal para asignar tickets -->
            <div class="modal-overlay" id="assignTicketsModalOverlay">
                <div class="modal">
                    <div class="modal-header">
                        <h2 class="modal-title">Asignar Ticket</h2>
                        <p class="modal-description">Seleccione un soportista o administrador para asignar el ticket.</p>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="form-label" for="soportistaSelect">Buscar soportista/administrador</label>
                            <select class="form-select" id="soportistaSelect" style="width: 100%">
                                <option value="">Seleccionar soportista...</option>
                            </select>
                        </div>
                        <div class="scroll-area">
                            <div class="scroll-content">
                                <div class="ticket-group">
                                    <div class="ticket-group-header">
                                        <span th:class="'badge badge-' + ${ticket.prioridad.toLowerCase()}" 
                                              th:text="${ticket.prioridad}"></span>
                                        <span style="font-size: 12px; color: #64748b;">1 ticket</span>
                                    </div>
                                    <ul class="ticket-list">
                                        <li class="ticket-item">
                                            <span class="ticket-id" th:text="${ticket.codigo}"></span> - 
                                            <span th:text="${ticket.categoria}"></span>: 
                                            <span th:text="${ticket.titulo}"></span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline" onclick="closeAssignTicketsModal()">Cancelar</button>
                        <button type="button" class="btn btn-primary" id="confirmAssignBtn">Confirmar</button>
                    </div>
                </div>
            </div>

            <style>
                /* Modal */
                .modal-overlay {
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background-color: rgba(0, 0, 0, 0.5);
                    display: none;
                    justify-content: center;
                    align-items: center;
                    z-index: 1050; /* Asegúrate de que sea mayor que otros elementos */
                }

                .modal-overlay.active {
                    display: flex;
                }

                .modal {
                    background-color: white;
                    border-radius: 8px;
                    border: 1px solid #ced4da; /* Borde más suave */
                    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
                    width: 95%;
                    max-width: 600px; /* Tamaño más compacto */
                    max-height: 90vh;
                    overflow-y: auto;
                    z-index: 1051; /* Mayor que el overlay */
                }

                .modal-header {
                    padding: 20px 24px;
                    border-bottom: 1px solid #e9ecef; /* Línea divisoria */
                }

                .modal-title {
                    font-size: 18px;
                    font-weight: 600;
                    margin-bottom: 8px;
                    color: #333; /* Color más oscuro */
                }

                .modal-description {
                    color: #6c757d; /* Color más suave */
                    font-size: 14px;
                    margin-bottom: 0;
                }

                .modal-body {
                    padding: 20px 24px;
                }

                .modal-footer {
                    border-top: 1px solid #e9ecef; /* Línea divisoria */
                    padding: 16px 24px 24px;
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                }

                /* Formulario */
                .form-grid {
                    display: grid;
                    gap: 16px;
                }

                .form-row {
                    display: grid;
                    grid-template-columns: 1fr;
                    gap: 16px;
                }

                .form-group {
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                    margin-bottom: 16px;
                }

                .form-select {
                    width: 100%;
                    padding: 4px 8px;
                    border: 1px solid #ced4da;
                    border-radius: 4px;
                    font-size: 13px;
                    background-color: #fff;
                    color: #495057;
                    cursor: pointer;
                    appearance: none; /* Elimina el estilo por defecto del select */
                    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
                    background-repeat: no-repeat;
                    background-position: right 12px center;
                    background-size: 12px;
                    transition: border-color 0.3s ease;
                }

                .form-select:focus {
                    border-color: #80bdff;
                    outline: none;
                    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
                }

                /* Scroll area */
                .scroll-area {
                    border: 1px solid #e2e8f0;
                    border-radius: 6px;
                    max-height: 200px;
                    overflow-y: auto;
                    margin-bottom: 16px;
                }

                .scroll-content {
                    padding: 16px;
                }

                /* Ticket groups */
                .ticket-group {
                    margin-bottom: 16px;
                }

                .ticket-group-header {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    margin-bottom: 8px;
                }

                .ticket-list {
                    list-style-type: disc;
                    padding-left: 20px;
                }

                .ticket-item {
                    font-size: 14px;
                    margin-bottom: 4px;
                }

                .ticket-id {
                    font-weight: 500;
                }


                /* Summary box */
                .summary-box {
                    background-color: #f8fafc;
                    border-radius: 6px;
                    padding: 12px;
                }

                .summary-header {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    margin-bottom: 8px;
                }

                .summary-icon {
                    width: 16px;
                    height: 16px;
                    color: #64748b;
                }

                .summary-title {
                    font-size: 14px;
                    font-weight: 500;
                }

                .summary-content {
                    display: flex;
                    justify-content: space-between;
                }

                .summary-item {
                    margin-bottom: 4px;
                }

                .summary-label {
                    font-size: 12px;
                    color: #64748b;
                }

                .summary-value {
                    font-size: 14px;
                    font-weight: 500;
                }

                /* Responsive */
                @media (min-width: 768px) {
                    .form-row {
                        grid-template-columns: repeat(3, 1fr);
                    }
                }


                /* Responsive */
                @media (min-width: 640px) {
                    .modal-footer {
                        flex-direction: row;
                        justify-content: flex-end;
                    }

                    .btn-full {
                        width: auto;
                    }
                }
            </style>
        </section>
    </body>
</html>